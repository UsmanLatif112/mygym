<head>
    {% block head %}
        <title>My Gym | Login</title>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
        <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
        <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='logo.png') }}">
        <!-- Your global CSS and meta tags here -->
    {% endblock %}
</head>
{% extends "base.html" %}
{% set hide_sidebar = True %}
{% block content %}
<div class="login-container">
    <img src="{{ url_for('static', filename='logo.png') }}" class="logo-center" style="max-width:90px; margin-bottom:22px;"/>
    <h2>Welcome to My Gym</h2>
    <form method="POST">
        {{ form.hidden_tag() }}
        <div>
            {{ form.username.label }}<br>
            {{ form.username(size=32, placeholder='Enter your username') }}
        </div>
        <div class="password-field-wrapper" style="position:relative;">
    {{ form.password(size=32, placeholder='Enter your password', id='password') }}
    <span id="togglePassword" style="position:absolute; right:12px; top:50%; transform:translateY(-50%); cursor:pointer;padding-bottom:6px;">
        <i class="fa fa-eye" id="eyeIcon"></i>
    </span>
</div>
        <div>
            {{ form.submit(class_='leet-btn') }}
        </div>
    </form>
</div>
{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <script>
      document.addEventListener("DOMContentLoaded", function() {
        {% for category, message in messages %}
          var toast = document.createElement('div');
          toast.className = 'toast-{{ category }}';
          toast.innerText = "{{ message|escape }}";
          document.body.appendChild(toast);
          setTimeout(function() { toast.remove(); }, 2800);
        {% endfor %}
      });
    </script>
  {% endif %}
{% endwith %}

<style>
.toast-error {
    position: fixed;
    top: 36px;
    right: 36px;
    min-width: 220px;
    background: #d90429;
    color: #fff;
    padding: 14px 28px;
    border-radius: 8px;
    font-size: 1.08em;
    box-shadow: 0 4px 24px #0002;
    z-index: 9999;
    opacity: 0.97;
    animation: toast-in 0.3s, toast-out 0.4s 2.4s forwards;
}
@keyframes toast-in { from {opacity: 0; transform: translateY(-20px);} to {opacity: 0.97; transform: translateY(0);} }
@keyframes toast-out { from {opacity: 0.97;} to {opacity: 0;} }
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
<script>
document.addEventListener("DOMContentLoaded", function() {
    const passwordInput = document.getElementById('password');
    const togglePassword = document.getElementById('togglePassword');
    const eyeIcon = document.getElementById('eyeIcon');
    togglePassword.addEventListener('click', function () {
        const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
        passwordInput.setAttribute('type', type);
        // Toggle icon
        eyeIcon.classList.toggle('fa-eye');
        eyeIcon.classList.toggle('fa-eye-slash');
    });
});
</script>


{% endblock %}
